# Staff

## Содержание

    1. Описание приложения и функционала

    2. Запуск приложения

    3. API взаимодействие с приложением

    4. Схема структуры базы данных

    5. Использованные технологии и их версии
### 1. Описание приложения и функционала

Перед вами сервис для работы персонала мебельного магазина, который поможет создавать задачи для выполнения, отслеживать статус заказа, перемещать задачу между сотрудниками и отслеживать наличие материалов в наличии. В приложении предоставлен как базовый функционал по принципу получения данных, создания, обновления, и удаления всех доступных моделей приложения: товара, материала, заказа, сотрудника, склада, так и не совсем стандартный, ориентированный на данный сервис, например просмотр всех нужных материалов заказа или мягкое удаление сотрудника.

Сотруднику всегда доступен основной функционал приложения в особенности это возможность работы с заказами. У каждого из сотрудников есть особая позиция в компании, а именно одна из шести уникальных позиций: 'менеджер' создает заказы по просьбе заказчика, 'кладовщик' занимается инвентаризацией склада, а 'агент по закупкам' отправляет запросы в компании-поставщики, 'конструктор' занимается сборкой заказов (сборка продукта и упаковка), 'курьер' доставляет заказы, а 'директор' может принимать новых сотрудников на работу и создавать их запись.

Порядок работы сотрудников определен в таком порядке:
- Менеджер составляет заказ по просьбе заказчика, предоставляя в запросе создания такие данные: адрес и список товаров, после этого заказу присваивается уникальный идентификатор, менеджер который сделал заказ и присваивается статус 'принят'
- В списке заказов появиться новый заказ, его должен принять кладовщик и статус заказа поменяется на 'подготовка', в котором автоматически проверяется наличие готового товара или нужных материалов для продуктов, при наличии товара или нужных материалов возвращается адрес склада или складов с нужными товарами или материалами. В случае отсутствия материалов для сборки на всех складах, заказ принимает агент по закупкам, и отправляет запрос в компанию-поставщика.
- После подтверждения наличия материалов, статус заказа меняется на 'сборка' и с ним может начать работу сборщик. После успешной сборки статус заказа меняется на 'упаковка' и после упаковки, статус поменяется на 'ожидание доставки'. (если сборщик допустил ошибку во время сборки и забраковал продукт, то есть возможность вернуть статус заказа на 'подготовка' для повторного выделения материалов)
- Заказ со статусом 'ожидание доставки' может быть принят курьером, и после принятия статус заказа поменяется на 'доставка', после успешной доставки статус поменяется на 'завершен' и работа с заказом будет завершена, при этом все сотрудники, работающие с этим заказом, будут отмечены в его данных

Пользователь с правами администратора, а именно сотрудник - директор, имеет возможность создать нового сотрудника, продукт, материал и склад, при необходимости.
### 2. Запуск приложения

Чтобы запустить проект, выполните следующие действия:

#### Запуск через docker:
1. Клонируем проект в среду разработки
2. Убедитесь что Java 17, docker compose 3.x
3. Выполните терминальную команду mvn clean install
4. Теперь запустить приложение можно терминальной командой "docker compose up"
5. Приложение будет доступно по адресу http://localhost:8080/ или http://localhost:8080/swagger-ui/index.html# для swagger

#### Запуск в IDE:
1. Клонируем проект в среду разработки
2. Убедитесь что Java 17
3. Укажите свои локальные данные для Postgres в resources/application.yaml
4. Выполните терминальную команду mvn clean install
5. Запустите приложение и оно станет  доступно по адресу http://localhost:8080/ или http://localhost:8080/swagger-ui/index.html# для swagger

#### Возможные проблемы
- IDE не видит SDK в проекте - нужно зайти в File/Project Structure/Modules и выбрать 17 версию Java
- IDE не видит ваш проект как maven проект - нужно зайти в File/Project Structure/Modules и обозначить проект как maven project
- Проект не может выполнить команду mvn clean install - стоит проверить отмечена ли папка target/generated-sources/openapi/src/main/java как generated sources root directory, для этого нажимаем на папку ПКМ, выбираем Mark Directory as - Generated Sources Root, после этого снова выполняем команду mvn clean install
### 3. API взаимодействие с приложением

API взаимодействие с приложением можно удобно посмотреть в файлах контракта openapi или по адресу http://localhost:8080/swagger-ui/index.html# после запуска приложения.
### 4. Схема структуры базы данных

![img_1](https://github.com/user-attachments/assets/7cc0e42a-c7ab-420c-907b-b8b982022e0d)

### 5. Использованные технологии и их версии

В проекте используются следующие технологии:

*Spring Boot* - `3.3.1`

*Java* - `17`

*Thymeleaf* - `3.1.2`

*MapStruct* - `1.5.5.Final`

*Lombok* - `1.18.26`

*Liquibase* -  `4.23.0`

*PostgreSQL* - `42.6.0`

*H2 Database* - `2.2.222`

*SpringDoc OpenAPI* - `2.5.0`

*Maven Surefire Plugin* - `2.22.1`

*Maven Compiler Plugin* - `3.13.0`

*OpenAPI Generator* - `7.7.0`

*Jacoco* - `0.8.12`
